/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var U=Object.defineProperty;var ie=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var ae=Object.prototype.hasOwnProperty;var oe=(u,i)=>{for(var e in i)U(u,e,{get:i[e],enumerable:!0})},re=(u,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of ne(i))!ae.call(u,s)&&s!==e&&U(u,s,{get:()=>i[s],enumerable:!(t=ie(i,s))||t.enumerable});return u};var le=u=>re(U({},"__esModule",{value:!0}),u);var ue={};oe(ue,{default:()=>O});module.exports=le(ue);var k=require("obsidian");var y=require("obsidian");var W={language:"Language",language_desc:"Select language",language_zh:"Chinese",language_en:"English",start_page:"Start page",welcome:"Welcome back \u{1F44B}",recent_notes:"Recent notes",pinned_notes:"Pinned notes",refresh:"Refresh",minutes_ago:"{minutes} minutes ago",hours_ago:"{hours} hours ago",days_ago:"{days} days ago",root_folder:"Root folder",start_page_settings:"Start page settings",recent_notes_limit:"Recent notes limit",recent_notes_limit_desc:"Set the number of recent modified notes to display on the start page",recent_notes_limit_placeholder:"Enter a number",pinned_notes_select:"Select pinned notes",pinned_notes_select_desc:"Select notes to pin on the start page",pinned_notes_select_button:"Select notes",pinned_notes_import_from_bookmarks:"Import from bookmarks",pinned_notes_import_from_bookmarks_desc:"Import pinned notes from Obsidian bookmarks",pinned_notes_import_from_bookmarks_button:"Import bookmarks",import_bookmarks_success:"Successfully imported {count} bookmarks",import_bookmarks_no_bookmarks:"No bookmarks found",import_bookmarks_already_exist:"All bookmarks are already pinned",pinned_notes_remove:"Remove",current_pinned_notes:"Current pinned notes",show_count:"Show count",new_note:"New note",total_notes:"Total notes",today_edited:"Today edited",total_size:"Total size",manage:"Manage",replace_new_tab:"Replace new tab",replace_new_tab_desc:"When opening a new tab, replace it with Start Page",remove_from_pinned_notes:"Remove from pinned notes",add_to_pinned_notes:"Add to pinned notes",move_up:"Move up",move_down:"Move down",open_start_page:"Open start page",open_start_page_desc:"Open the start page in current tab",open_start_page_new_tab:"Open start page in new tab",open_start_page_new_tab_desc:"Open the start page in a new tab",include_all_files_in_recent:"Include all files in recent notes",include_all_files_in_recent_desc:"Include all types of files in the recent notes section, rather than only markdown files",show_title_navigation_bar:"Show title navigation bar",show_title_navigation_bar_desc:"Show the title navigation bar on the start page",show_title_navigation_bar_default:"Default",show_title_navigation_bar_show:"Show",show_title_navigation_bar_hide:"Hide",show_custom_footer_text:"Show custom footer text",show_custom_footer_text_desc:"Show custom footer text on the start page",use_random_footer_text:"Use random footer text",use_random_footer_text_desc:"Show random footer text on the start page",custom_footer_text:"Custom footer text",custom_footer_text_desc:"Set custom footer text for the start page",custom_footer_text_placeholder:"Enter custom footer text",general_settings_heading:"General",appearance_settings_heading:"Appearance",new_tab_settings_heading:"New Tab",footer_settings_heading:"Footer",pinned_notes_settings_heading:"Pinned Notes",default_footer_text:"I think, therefore I am. \u2014 Ren\xE9 Descartes",loading_footer_text:"Loading...",search_modal_title:"Search",search_placeholder:"Type to start search...",case_sensitive:"Case sensitive",no_results:"No matching results.",no_results_press_enter:'No matching results. Press <b>Enter</b> to create a new note "<b>{query}</b>".',show_stat_bar:"Show stat. bar",show_stat_bar_desc:"Show stat. bar on the start page",new_version_available:"New version available",update_to_version:"Update to v{version}",search_settings_heading:"Search",search_exclude_list:"Exclude list",search_exclude_list_desc:"Files and folders to exclude from search results",search_exclude_list_add_button:"Add file or folder",search_exclude_list_remove:"Remove from exclude list",current_search_exclude_list:"Current exclude list",search_exclude_settings:"Exclude settings",search_exclude_settings_tooltip:"Excluded: {list}",style_settings_heading:"Style Settings",style_settings_pinned_notes:"Pinned Notes Style",style_settings_recent_notes:"Recent Notes Style",style_section_margin:"Section Margin",style_section_padding:"Section Padding",style_header_margin:"Header Margin",style_header_padding:"Header Padding",style_title_font_size:"Title Font Size",style_title_margin:"Title Margin",style_title_padding:"Title Padding",style_list_gap:"List Gap",style_item_padding:"Item Padding",style_item_margin:"Item Margin",style_note_title_font_size:"Note Title Font Size",style_note_title_margin:"Note Title Margin",style_note_title_padding:"Note Title Padding",style_note_date_font_size:"Note Date Font Size",style_note_folder_font_size:"Note Folder Font Size",style_section_margin_desc:"Set the margin for the entire section (e.g., 20px, 10px 0)",style_section_padding_desc:"Set the padding for the entire section (e.g., 15px)",style_header_margin_desc:"Set the margin for the header area (e.g., 0 0 10px 0)",style_header_padding_desc:"Set the padding for the header area",style_title_font_size_desc:"Set the font size for the section title (e.g., 1.5em, 18px)",style_title_margin_desc:"Set the margin for the section title",style_title_padding_desc:"Set the padding for the section title",style_list_gap_desc:"Set the gap between items in the list (e.g., 8px)",style_item_padding_desc:"Set the padding for each note item (e.g., 10px)",style_item_margin_desc:"Set the margin for each note item",style_note_title_font_size_desc:"Set the font size for the note title (e.g., 1em, 14px)",style_note_title_margin_desc:"Set the margin for the note title",style_note_title_padding_desc:"Set the padding for the note title",style_note_date_font_size_desc:"Set the font size for the note date",style_note_folder_font_size_desc:"Set the font size for the folder path text"};var j={language:"\u8BED\u8A00",language_desc:"\u9009\u62E9\u8BED\u8A00",language_zh:"\u4E2D\u6587",language_en:"\u82F1\u6587",start_page:"\u542F\u52A8\u9996\u9875",welcome:"\u6B22\u8FCE\u56DE\u6765\u{1F44B}",recent_notes:"\u6700\u8FD1\u7B14\u8BB0",pinned_notes:"\u7F6E\u9876\u7B14\u8BB0",refresh:"\u5237\u65B0",minutes_ago:"{minutes}\u5206\u949F\u524D",hours_ago:"{hours}\u5C0F\u65F6\u524D",days_ago:"{days}\u5929\u524D",root_folder:"\u7B14\u8BB0\u5E93",start_page_settings:"\u542F\u52A8\u9996\u9875\u8BBE\u7F6E",recent_notes_limit:"\u6700\u8FD1\u4FEE\u6539\u7B14\u8BB0\u663E\u793A\u6570\u91CF",recent_notes_limit_desc:"\u8BBE\u7F6E\u542F\u52A8\u9996\u9875\u663E\u793A\u7684\u6700\u8FD1\u4FEE\u6539\u7B14\u8BB0\u6570\u91CF",recent_notes_limit_placeholder:"\u8F93\u5165\u6570\u5B57",pinned_notes_select:"\u9009\u62E9\u7F6E\u9876\u7B14\u8BB0",pinned_notes_select_desc:"\u9009\u62E9\u8981\u5728\u542F\u52A8\u9996\u9875\u7F6E\u9876\u663E\u793A\u7684\u7B14\u8BB0",pinned_notes_select_button:"\u9009\u62E9\u7B14\u8BB0",pinned_notes_import_from_bookmarks:"\u4ECE\u4E66\u7B7E\u5BFC\u5165",pinned_notes_import_from_bookmarks_desc:"\u4ECE Obsidian \u4E66\u7B7E\u5BFC\u5165\u7F6E\u9876\u7B14\u8BB0",pinned_notes_import_from_bookmarks_button:"\u5BFC\u5165\u4E66\u7B7E",import_bookmarks_success:"\u6210\u529F\u5BFC\u5165 {count} \u4E2A\u4E66\u7B7E",import_bookmarks_no_bookmarks:"\u672A\u627E\u5230\u4E66\u7B7E",import_bookmarks_already_exist:"\u6240\u6709\u4E66\u7B7E\u5DF2\u7ECF\u88AB\u7F6E\u9876",pinned_notes_remove:"\u79FB\u9664",current_pinned_notes:"\u5F53\u524D\u7F6E\u9876\u7B14\u8BB0",show_count:"\u663E\u793A\u6570\u91CF",new_note:"\u65B0\u5EFA\u7B14\u8BB0",total_notes:"\u603B\u7B14\u8BB0\u6570",today_edited:"\u4ECA\u65E5\u7F16\u8F91",total_size:"\u603B\u5360\u7528\u7A7A\u95F4",manage:"\u7BA1\u7406",replace_new_tab:"\u66FF\u6362\u65B0\u6807\u7B7E\u9875",replace_new_tab_desc:"\u6253\u5F00\u65B0\u6807\u7B7E\u9875\u65F6\uFF0C\u4F7F\u7528\u542F\u52A8\u9996\u9875\u66FF\u6362\u9ED8\u8BA4\u7684\u65B0\u6807\u7B7E\u9875",remove_from_pinned_notes:"\u4ECE\u7F6E\u9876\u7B14\u8BB0\u79FB\u9664",add_to_pinned_notes:"\u6DFB\u52A0\u5230\u7F6E\u9876\u7B14\u8BB0",move_up:"\u4E0A\u79FB",move_down:"\u4E0B\u79FB",open_start_page:"\u6253\u5F00\u542F\u52A8\u9996\u9875",open_start_page_desc:"\u5728\u5F53\u524D\u6807\u7B7E\u9875\u6253\u5F00\u542F\u52A8\u9996\u9875",open_start_page_new_tab:"\u5728\u65B0\u6807\u7B7E\u9875\u6253\u5F00\u542F\u52A8\u9996\u9875",open_start_page_new_tab_desc:"\u5728\u65B0\u6807\u7B7E\u9875\u4E2D\u6253\u5F00\u542F\u52A8\u9996\u9875",include_all_files_in_recent:"\u5728\u6700\u8FD1\u4FEE\u6539\u7B14\u8BB0\u4E2D\u5305\u542B\u6240\u6709\u6587\u4EF6",include_all_files_in_recent_desc:"\u5728\u6700\u8FD1\u4FEE\u6539\u7B14\u8BB0\u4E2D\u5305\u542B\u6240\u6709\u7C7B\u578B\u7684\u6587\u4EF6\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662FMarkdown\u6587\u4EF6",show_title_navigation_bar:"\u663E\u793A\u6807\u9898\u5BFC\u822A\u680F",show_title_navigation_bar_desc:"\u5728\u542F\u52A8\u9996\u9875\u4E2D\u663E\u793A\u6807\u9898\u5BFC\u822A\u680F",show_title_navigation_bar_default:"\u9ED8\u8BA4",show_title_navigation_bar_show:"\u663E\u793A",show_title_navigation_bar_hide:"\u9690\u85CF",show_custom_footer_text:"\u663E\u793A\u81EA\u5B9A\u4E49\u9875\u811A\u6587\u672C",show_custom_footer_text_desc:"\u5728\u542F\u52A8\u9996\u9875\u4E2D\u663E\u793A\u81EA\u5B9A\u4E49\u9875\u811A\u6587\u672C",use_random_footer_text:"\u4F7F\u7528\u968F\u673A\u9875\u811A\u6587\u672C",use_random_footer_text_desc:"\u5728\u542F\u52A8\u9996\u9875\u4E2D\u663E\u793A\u968F\u673A\u9875\u811A\u6587\u672C",custom_footer_text:"\u81EA\u5B9A\u4E49\u9875\u811A\u6587\u672C",custom_footer_text_desc:"\u8BBE\u7F6E\u542F\u52A8\u9996\u9875\u7684\u81EA\u5B9A\u4E49\u9875\u811A\u6587\u672C",custom_footer_text_placeholder:"\u8F93\u5165\u81EA\u5B9A\u4E49\u9875\u811A\u6587\u672C",general_settings_heading:"\u5E38\u89C4",appearance_settings_heading:"\u5916\u89C2",new_tab_settings_heading:"\u65B0\u6807\u7B7E\u9875",footer_settings_heading:"\u9875\u811A",pinned_notes_settings_heading:"\u56FA\u5B9A\u7684\u7B14\u8BB0",default_footer_text:"\u5929\u884C\u5065,\u541B\u5B50\u4EE5\u81EA\u5F3A\u4E0D\u606F\u3002\u2014\u2014\u300A\u5468\u6613\u300B",loading_footer_text:"\u52A0\u8F7D\u4E2D...",search_modal_title:"\u641C\u7D22",search_placeholder:"\u8F93\u5165\u641C\u7D22\u5185\u5BB9",case_sensitive:"\u533A\u5206\u5927\u5C0F\u5199",no_results:"\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u7ED3\u679C\u3002",no_results_press_enter:'\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u7ED3\u679C\u3002\u6309 <b>Enter</b> \u952E\u521B\u5EFA\u65B0\u7B14\u8BB0 "<b>{query}</b>"\u3002',show_stat_bar:"\u663E\u793A\u7EDF\u8BA1\u680F",show_stat_bar_desc:"\u5728\u542F\u52A8\u9996\u9875\u4E2D\u663E\u793A\u7EDF\u8BA1\u680F",new_version_available:"\u6709\u65B0\u7248\u672C\u53EF\u7528",update_to_version:"\u66F4\u65B0\u5230 v{version}",search_settings_heading:"\u641C\u7D22",search_exclude_list:"\u6392\u9664\u5217\u8868",search_exclude_list_desc:"\u4ECE\u641C\u7D22\u7ED3\u679C\u4E2D\u6392\u9664\u7684\u6587\u4EF6\u548C\u6587\u4EF6\u5939",search_exclude_list_add_button:"\u6DFB\u52A0\u6587\u4EF6\u6216\u6587\u4EF6\u5939",search_exclude_list_remove:"\u4ECE\u6392\u9664\u5217\u8868\u79FB\u9664",current_search_exclude_list:"\u5F53\u524D\u6392\u9664\u5217\u8868",search_exclude_settings:"\u6392\u9664\u8BBE\u7F6E",search_exclude_settings_tooltip:"\u5DF2\u6392\u9664: {list}",style_settings_heading:"\u6837\u5F0F\u8BBE\u7F6E",style_settings_pinned_notes:"\u7F6E\u9876\u7B14\u8BB0\u6837\u5F0F",style_settings_recent_notes:"\u6700\u8FD1\u7B14\u8BB0\u6837\u5F0F",style_section_margin:"\u533A\u57DF\u5916\u8FB9\u8DDD (Margin)",style_section_padding:"\u533A\u57DF\u5185\u8FB9\u8DDD (Padding)",style_header_margin:"\u5934\u90E8\u5916\u8FB9\u8DDD (Margin)",style_header_padding:"\u5934\u90E8\u5185\u8FB9\u8DDD (Padding)",style_title_font_size:"\u6807\u9898\u5B57\u4F53\u5927\u5C0F",style_title_margin:"\u6807\u9898\u5916\u8FB9\u8DDD (Margin)",style_title_padding:"\u6807\u9898\u5185\u8FB9\u8DDD (Padding)",style_list_gap:"\u5217\u8868\u95F4\u8DDD (Gap)",style_item_padding:"\u5217\u8868\u9879\u5185\u8FB9\u8DDD (Padding)",style_item_margin:"\u5217\u8868\u9879\u5916\u8FB9\u8DDD (Margin)",style_note_title_font_size:"\u7B14\u8BB0\u6807\u9898\u5B57\u4F53\u5927\u5C0F",style_note_title_margin:"\u7B14\u8BB0\u6807\u9898\u5916\u8FB9\u8DDD (Margin)",style_note_title_padding:"\u7B14\u8BB0\u6807\u9898\u5185\u8FB9\u8DDD (Padding)",style_note_date_font_size:"\u7B14\u8BB0\u65E5\u671F\u5B57\u4F53\u5927\u5C0F",style_note_folder_font_size:"\u7B14\u8BB0\u76EE\u5F55\u5B57\u4F53\u5927\u5C0F",style_section_margin_desc:"\u8BBE\u7F6E\u6574\u4E2A\u533A\u57DF\u7684\u5916\u8FB9\u8DDD (\u5982: 20px, 10px 0)",style_section_padding_desc:"\u8BBE\u7F6E\u6574\u4E2A\u533A\u57DF\u7684\u5185\u8FB9\u8DDD (\u5982: 15px)",style_header_margin_desc:"\u8BBE\u7F6E\u533A\u57DF\u5934\u90E8(\u6807\u9898\u548C\u6309\u94AE)\u7684\u5916\u8FB9\u8DDD",style_header_padding_desc:"\u8BBE\u7F6E\u533A\u57DF\u5934\u90E8(\u6807\u9898\u548C\u6309\u94AE)\u7684\u5185\u8FB9\u8DDD",style_title_font_size_desc:"\u8BBE\u7F6E\u533A\u57DF\u6807\u9898\u7684\u5B57\u4F53\u5927\u5C0F (\u5982: 1.5em, 18px)",style_title_margin_desc:"\u8BBE\u7F6E\u533A\u57DF\u6807\u9898\u7684\u5916\u8FB9\u8DDD",style_title_padding_desc:"\u8BBE\u7F6E\u533A\u57DF\u6807\u9898\u7684\u5185\u8FB9\u8DDD",style_list_gap_desc:"\u8BBE\u7F6E\u5217\u8868\u9879\u4E4B\u95F4\u7684\u95F4\u8DDD (\u5982: 8px)",style_item_padding_desc:"\u8BBE\u7F6E\u6BCF\u4E2A\u7B14\u8BB0\u9879\u7684\u5185\u8FB9\u8DDD (\u5982: 10px)",style_item_margin_desc:"\u8BBE\u7F6E\u6BCF\u4E2A\u7B14\u8BB0\u9879\u7684\u5916\u8FB9\u8DDD",style_note_title_font_size_desc:"\u8BBE\u7F6E\u7B14\u8BB0\u6807\u9898\u7684\u5B57\u4F53\u5927\u5C0F (\u5982: 1em, 14px)",style_note_title_margin_desc:"\u8BBE\u7F6E\u7B14\u8BB0\u6807\u9898\u7684\u5916\u8FB9\u8DDD",style_note_title_padding_desc:"\u8BBE\u7F6E\u7B14\u8BB0\u6807\u9898\u7684\u5185\u8FB9\u8DDD",style_note_date_font_size_desc:"\u8BBE\u7F6E\u7B14\u8BB0\u65E5\u671F\u7684\u5B57\u4F53\u5927\u5C0F",style_note_folder_font_size_desc:"\u8BBE\u7F6E\u6587\u4EF6\u5939\u8DEF\u5F84\u6587\u5B57\u7684\u5B57\u4F53\u5927\u5C0F"};var $={en:W,zh:j},pe="en",Q=W;function q(u){$[u]&&(pe=u,Q=$[u])}function a(u){return Q[u]||u}var P="totalNotes",A="todayEdited",M="totalSize",Y={sectionMargin:"",sectionPadding:"",headerMargin:"",headerPadding:"",titleFontSize:"",titleMargin:"",titlePadding:"",listGap:"",itemPadding:"",itemMargin:"",noteTitleFontSize:"",noteTitleMargin:"",noteTitlePadding:"",noteDateFontSize:"",noteFolderFontSize:""},x={includeAllFilesInRecent:!0,recentNotesLimit:10,pinnedNotes:[],replaceNewTab:!0,showTitleNavigationBar:"default",showCustomFooterText:!1,useRandomFooterText:!1,todayRandomEnFooterText:"",todayRandomZhFooterText:"",customFooterText:"",scrollPosition:0,showStatBar:!0,lastVersionCheck:0,latestVersion:"",excludeList:[],pinnedNotesStyle:{...Y},recentNotesStyle:{...Y}};var X=require("obsidian");var I=require("obsidian"),he="https://zenquotes.io/api/random",ge="https://v2.jinrishici.com/one.json?client=browser-sdk/1.2",T=class{static async getFooterText(i){let e=i.settings;return e.showCustomFooterText?e.useRandomFooterText?((0,I.getLanguage)()||"en")==="zh"?await T.getChineseRandomFooterText(i):await T.getEnglishRandomFooterText(i):e.customFooterText||a("default_footer_text"):a("default_footer_text")}static async getChineseRandomFooterText(i){let e=i.settings,t=new Date().toISOString().slice(0,10);if(e.todayRandomZhFooterText&&e.todayRandomZhFooterText.startsWith(t))return e.todayRandomZhFooterText.split("|")[1];try{let s=await(0,I.requestUrl)(ge);if(s.status===200){let n=await s.json,o=`${n.data.content} - ${n.data.origin.author}`;return e.todayRandomZhFooterText=`${t}|${o}`,i.saveSettings(),o}else console.log("Error fetching Chinese footer text:",s.status,s.text)}catch(s){console.log("Error fetching Chinese footer text:",s)}return a("default_footer_text")}static async getEnglishRandomFooterText(i){let e=i.settings,t=new Date().toISOString().slice(0,10);if(e.todayRandomEnFooterText&&e.todayRandomEnFooterText.startsWith(t))return e.todayRandomEnFooterText.split("|")[1];try{let s=await(0,I.requestUrl)(he);if(s.status===200){let n=await s.json,o=`${n[0].q} - ${n[0].a}`;return e.todayRandomEnFooterText=`${t}|${o}`,i.saveSettings(),o}else console.log("Error fetching English footer text:",s.status,s.text)}catch(s){console.log("Error fetching English footer text:",s)}return a("default_footer_text")}};var K=class{static createFolderIcon(){let i="http://www.w3.org/2000/svg",e=document.createElementNS(i,"svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","14"),e.setAttribute("height","14");let t=document.createElementNS(i,"path");return t.setAttribute("d","M2 6a2 2 0 0 1 2-2h5l2 2h9a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6z"),t.setAttribute("fill","currentColor"),e.appendChild(t),e}static createArrowUpIcon(){let i="http://www.w3.org/2000/svg",e=document.createElementNS(i,"svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","16"),e.setAttribute("height","16");let t=document.createElementNS(i,"path");return t.setAttribute("d","M12 8l-6 6h12l-6-6z"),t.setAttribute("fill","currentColor"),e.appendChild(t),e}static createArrowDownIcon(){let i="http://www.w3.org/2000/svg",e=document.createElementNS(i,"svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","16"),e.setAttribute("height","16");let t=document.createElementNS(i,"path");return t.setAttribute("d","M12 16l6-6H6l6 6z"),t.setAttribute("fill","currentColor"),e.appendChild(t),e}static createRemoveIcon(){let i="http://www.w3.org/2000/svg",e=document.createElementNS(i,"svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","16"),e.setAttribute("height","16");let t=document.createElementNS(i,"path");return t.setAttribute("d","M6 7h12v2H6V7zm2 2h8l-1 9H9l-1-9zm2-4h4l1 2H9l1-2z"),t.setAttribute("fill","currentColor"),e.appendChild(t),e}static createFilterIcon(){let i="http://www.w3.org/2000/svg",e=document.createElementNS(i,"svg");e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("width","16"),e.setAttribute("height","16");let t=document.createElementNS(i,"path");return t.setAttribute("d","M3 4h18v2.4l-7 7V20l-4 2v-9l-7-7V4z"),t.setAttribute("stroke","currentColor"),t.setAttribute("stroke-width","2"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),e.appendChild(t),e}static createFileIcon(i){return K.createSVG(this.iconSVGs[i]||this.iconSVGs.md)}static createEditIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M11 4H4A2 2 0 0 0 2 6V20A2 2 0 0 0 4 22H18A2 2 0 0 0 20 20V13"}},{tagName:"path",attributes:{d:"M18.5 2.5L22 6L12 16H6V10L18.5 2.5Z"}}])}static createRefreshIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M3 2v6h6"}},{tagName:"path",attributes:{d:"M3 13a9 9 0 1 0 3-7.7L3 8"}}],"refresh-icon")}static createLogoIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M12 2L2 7L12 12L22 7L12 2Z","stroke-linecap":"none"}},{tagName:"path",attributes:{d:"M2 17L12 22L22 17","stroke-linecap":"none"}},{tagName:"path",attributes:{d:"M2 12L12 17L22 12","stroke-linecap":"none"}}],"logo-icon")}static createNewNoteIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M12 5V19"}},{tagName:"path",attributes:{d:"M5 12H19"}}],"new-note-icon")}static createPinnedNoteIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z",fill:"currentColor"}}],"section-icon")}static createRecentNoteIcon(){return this.createSVG([{tagName:"path",attributes:{d:"M12 8V12L15 15"}},{tagName:"circle",attributes:{cx:12,cy:12,r:10,stroke:"currentColor","stroke-width":2}}],"section-icon")}static createStatIcon(i){return i===P?this.createSVG([{tagName:"path",attributes:{d:"M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z"}},{tagName:"path",attributes:{d:"M14 2V8H20"}}]):i===A?this.createSVG([{tagName:"path",attributes:{d:"M12 8V12L15 15"}},{tagName:"circle",attributes:{cx:12,cy:12,r:10,stroke:"currentColor","stroke-width":2}}]):i===M?this.createSVG([{tagName:"rect",attributes:{x:"3",y:"6",width:"18",height:"12",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2",fill:"none"}},{tagName:"circle",attributes:{cx:"7",cy:"12",r:"1",fill:"currentColor"}},{tagName:"path",attributes:{d:"M11 10H17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}},{tagName:"path",attributes:{d:"M11 14H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}}]):null}static createSVG(i,e=null){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),e&&t.setAttribute("class",e),i.forEach(s=>{let n=document.createElementNS("http://www.w3.org/2000/svg",s.tagName);s.tagName==="path"&&!s.attributes.fill&&(s.attributes.stroke=s.attributes.stroke||"currentColor",s.attributes["stroke-width"]=s.attributes["stroke-width"]||"2",s.attributes["stroke-linecap"]=s.attributes["stroke-linecap"]||"round",s.attributes["stroke-linejoin"]=s.attributes["stroke-linejoin"]||"round");for(let[o,r]of Object.entries(s.attributes))r!==void 0&&(typeof r=="number"&&(r=r.toString()),n.setAttribute(o,r));t.appendChild(n)}),t}},g=K;g.iconSVGs={md:[{tagName:"path",attributes:{d:"M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z"}},{tagName:"path",attributes:{d:"M14 2V8H20"}}],base:[{tagName:"rect",attributes:{x:"4",y:"3",width:"16",height:"20",rx:"2",stroke:"currentColor","stroke-width":"2",fill:"none"}},{tagName:"path",attributes:{d:"M6 10H18",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}},{tagName:"path",attributes:{d:"M6 16H18",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}},{tagName:"path",attributes:{d:"M10 4V24",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}],canvas:[{tagName:"rect",attributes:{x:"4",y:"3",width:"16",height:"20",rx:"2",stroke:"currentColor","stroke-width":"2",fill:"none"}},{tagName:"circle",attributes:{cx:"8",cy:"9",r:"2",fill:"currentColor"}},{tagName:"circle",attributes:{cx:"16",cy:"9",r:"2",fill:"currentColor"}},{tagName:"circle",attributes:{cx:"12",cy:"17",r:"2",fill:"currentColor"}},{tagName:"path",attributes:{d:"M10 9L14 9",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}},{tagName:"path",attributes:{d:"M9.4 10.6L12 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}},{tagName:"path",attributes:{d:"M14.6 10.6L12 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}]};var m=class{static truncateMiddle(i,e=24,t=16){if(!i||i.length<=e+t+3)return i;let n=i.slice(0,e),o=i.slice(-t);return`${n}...${o}`}static getDirPath(i){if(!i)return"/";let e=i.lastIndexOf("/");return e===-1?"/":"/"+i.slice(0,e)}static getFileNameWithoutExtension(i){return i.slice(0,i.lastIndexOf("."))}static formatDate(i){let e=new Date(i),s=new Date().getTime()-e.getTime();if(s<24*60*60*1e3){let n=Math.floor(s/36e5);if(n===0){let o=Math.floor(s/6e4);return a("minutes_ago").replace("{minutes}",o.toString())}return a("hours_ago").replace("{hours}",n.toString())}if(s<7*24*60*60*1e3){let n=Math.floor(s/864e5);return a("days_ago").replace("{days}",n.toString())}return e.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}static formatSize(i){return i<1024?i+"B":i<1024*1024?(i/1024).toFixed(0)+"KB":i<1024*1024*1024?(i/(1024*1024)).toFixed(0)+"MB":(i/(1024*1024*1024)).toFixed(0)+"GB"}};var N=require("obsidian"),R=class extends N.Modal{constructor(e,t,s,n=""){super(e);this.initialQuery="";this.selectedIndex=-1;this.caseSensitive=!1;this.plugin=t,this.setTitle(a("search_modal_title")),this.allFiles=this.app.vault.getFiles(),this.filteredResults=[],this.onChooseItem=s,this.initialQuery=n}onOpen(){let{contentEl:e,modalEl:t}=this;e.addClass("my-search-content"),t.addClass("my-search-modal");let s=e.createDiv("search-container");this.searchComponent=new N.SearchComponent(s),this.searchComponent.setPlaceholder(a("search_placeholder")).onChange(l=>{this.performSearch(l)});let n=s.createEl("button",{cls:"search-exclude-settings-btn",attr:{title:this.getExcludeTooltip()}}),o=g.createFilterIcon();n.appendChild(o),n.addEventListener("click",l=>{l.preventDefault(),this.openExcludeSettings()});let r=s.createEl("button",{cls:"search-case-sensitive-btn",attr:{title:a("case_sensitive")}});r.setText("Aa"),this.updateCaseSensitiveButton(r),r.addEventListener("click",l=>{l.preventDefault(),this.caseSensitive=!this.caseSensitive,this.updateCaseSensitiveButton(r);let d=this.searchComponent.getValue();d&&this.performSearch(d)}),this.resultsContainer=e.createDiv("search-results-container"),this.initialQuery&&(this.searchComponent.setValue(this.initialQuery),this.performSearch(this.initialQuery)),this.searchComponent.inputEl.focus(),this.setupKeyboardNavigation()}onClose(){let{contentEl:e}=this;e.empty()}updateCaseSensitiveButton(e){this.caseSensitive?e.addClass("is-active"):e.removeClass("is-active")}performSearch(e){if(e==="")this.filteredResults=[];else if(this.caseSensitive)this.filteredResults=this.allFiles.filter(t=>{var o,r;if(this.isFileExcluded(t))return!1;if(t.name.includes(e))return!0;let s=this.app.metadataCache.getFileCache(t),n=((o=s==null?void 0:s.frontmatter)==null?void 0:o.aliases)||((r=s==null?void 0:s.frontmatter)==null?void 0:r.alias);return n?(Array.isArray(n)?n:[n]).some(d=>typeof d=="string"&&d.includes(e)):!1});else{let t=e.toLowerCase();this.filteredResults=this.allFiles.filter(s=>{var r,l;if(this.isFileExcluded(s))return!1;if(s.name.toLowerCase().includes(t))return!0;let n=this.app.metadataCache.getFileCache(s),o=((r=n==null?void 0:n.frontmatter)==null?void 0:r.aliases)||((l=n==null?void 0:n.frontmatter)==null?void 0:l.alias);return o?(Array.isArray(o)?o:[o]).some(p=>typeof p=="string"&&p.toLowerCase().includes(t)):!1})}this.renderResults()}renderResults(){var t,s;if(this.resultsContainer.empty(),this.selectedIndex=-1,this.filteredResults.length===0){let n=this.resultsContainer.createDiv("search-empty-state"),o=this.searchComponent.getValue();o?n.innerHTML=a("no_results_press_enter").replace("{query}",o):n.setText(a("no_results"));return}let e=this.resultsContainer.createEl("ul",{cls:"search-results-list"});for(let n=0;n<this.filteredResults.length;n++){let o=this.filteredResults[n],r=e.createEl("li",{cls:"search-result-item"}),l=m.getFileNameWithoutExtension(o.name),d=document.createElement("span");d.addClass("search-result-item-file-name"),d.setText(l),r.setAttribute("title",l),r.appendChild(d);let p=this.searchComponent.getValue(),h=this.app.metadataCache.getFileCache(o),v=((t=h==null?void 0:h.frontmatter)==null?void 0:t.aliases)||((s=h==null?void 0:h.frontmatter)==null?void 0:s.alias),b=this.getMatchedAlias(v,p);if(b){let S=document.createElement("span");S.addClass("search-result-item-alias"),S.setText(b),r.appendChild(S)}let E=document.createElement("span");if(E.addClass("search-result-item-tag"),r.appendChild(E),(o.extension.toLowerCase()==="canvas"||o.extension.toLowerCase()==="base")&&E.setText(o.extension.toUpperCase()),o.parent&&!o.parent.isRoot()){let S=o.parent.name,w=document.createElement("span"),L=g.createFolderIcon();w.setText(S),w.addClass("search-result-item-folder-name"),L.addClass("search-result-item-folder-icon"),r.appendChild(L),r.appendChild(w)}r.onClickEvent(()=>{this.onChooseItem(o),this.close()})}this.filteredResults.length>0&&this.setActiveIndex(0)}setupKeyboardNavigation(){this.searchComponent.inputEl.addEventListener("keydown",e=>{if(e.key==="Enter"){if(e.preventDefault(),this.filteredResults.length===0){let t=this.searchComponent.getValue().trim();t&&this.createNewNote(t)}else if(this.selectedIndex>=0&&this.selectedIndex<this.filteredResults.length){let t=this.filteredResults[this.selectedIndex];this.onChooseItem(t),this.close()}return}if(this.filteredResults.length!==0){if(e.key==="ArrowDown")e.preventDefault(),this.setActiveIndex((this.selectedIndex+1)%this.filteredResults.length);else if(e.key==="ArrowUp"){e.preventDefault();let t=this.selectedIndex-1;this.setActiveIndex(t<0?this.filteredResults.length-1:t)}}})}setActiveIndex(e){let t=this.resultsContainer.querySelectorAll(".search-result-item");t.forEach(s=>s.removeClass("is-active")),e>=0&&e<t.length&&(this.selectedIndex=e,t[e].addClass("is-active"),t[e].scrollIntoView({block:"nearest",behavior:"smooth"}))}async createNewNote(e){try{let s=`${e.replace(/[\\/:*?"<>|]/g,"")}.md`,n=this.app.vault.getAbstractFileByPath(s);if(n)n instanceof N.TFile&&await this.app.workspace.getLeaf().openFile(n);else{let o=await this.app.vault.create(s,"");await this.app.workspace.getLeaf().openFile(o)}this.close()}catch(t){console.error("Failed to create new note:",t)}}getMatchedAlias(e,t){if(!e||!t)return null;let s=Array.isArray(e)?e:[e],n=this.caseSensitive?t:t.toLowerCase();for(let o of s){if(typeof o!="string")continue;if((this.caseSensitive?o:o.toLowerCase()).includes(n))return o}return null}isFileExcluded(e){let t=this.plugin.settings.excludeList;if(t.length===0)return!1;for(let s of t)if(e.path===s||e.path.startsWith(s+"/"))return!0;return!1}getExcludeTooltip(){let e=this.plugin.settings.excludeList;if(e.length===0)return a("search_exclude_settings_tooltip").replace("{list}",a("no_results"));let t=e.length<=3?e.join(", "):e.slice(0,3).join(", ")+"...";return a("search_exclude_settings_tooltip").replace("{list}",t)}openExcludeSettings(){this.close(),this.app.setting.open(),this.app.setting.openTabById(this.plugin.manifest.id)}};var V=class{constructor(i,e,t){this.initialQuery="";this.stats=[{id:P,data:{number:0,label:function(){return a("total_notes")}}},{id:A,data:{number:0,label:function(){return a("today_edited")}}},{id:M,data:{number:"0",label:function(){return a("total_size")}}}];this.pinnedNotes=null;this.recentNotes=null;this.app=i,this.plugin=e,this.container=t}async createStartPage(i,e){this.initData(i,e),this.container.empty(),this.container.addClass("start-page-container");let t=this.createHeader(),s=this.createMainContent(),n=await this.createFooter();this.container.appendChild(t),this.container.appendChild(s),this.container.appendChild(n),this.setupGlobalKeyListener()}destroy(){this.removeGlobalKeyListener()}initData(i,e){this.pinnedNotes=i,this.recentNotes=e,this.stats.forEach(t=>{t.id===P?t.data.number=this.app.vault.getMarkdownFiles().length:t.id===A?t.data.number=this.getTodayModifiedNoteCount():t.id===M&&(t.data.number=m.formatSize(this.getTotalSize()))})}async updateNoteModifiedTimes(i){for(let e of i){let t=this.container.querySelector(`[data-note-path="${e.path}"] .note-date`);if(t){let s=m.formatDate(e.stat.mtime);t.textContent=s}}}createHeader(){let i=this.createElement("header","header"),e=this.createElement("div","logo"),t=g.createLogoIcon(),s=this.createElement("span","logo-text","Start Page for Obsidian");this.searchBox=this.createElement("input","search-box",""),this.searchBox.type="text",this.searchBox.placeholder=a("search_placeholder"),this.searchBox.addEventListener("click",r=>{this.showSearchModal()}),this.searchBox.addEventListener("focus",r=>{r.target.blur()});let n=this.createElement("div","search-box-container");n.appendChild(this.searchBox),e.appendChild(t),e.appendChild(s),e.appendChild(n);let o=this.createElement("div","header-actions");if(this.hasUpdate()){let r=this.createUpdateBadge();o.appendChild(r)}return i.appendChild(e),i.appendChild(o),i}createStatsSection(){let i=this.createElement("div","stats-section");return this.stats.forEach(e=>{let t=this.createElement("div","stat-card"),s=this.createElement("div","stat-icon"),n=g.createStatIcon(e.id);s.appendChild(n);let o=this.createElement("div","stat-content"),r=this.createElement("div","stat-number",e.data.number.toString()),l=this.createElement("div","stat-label",e.data.label());o.appendChild(r),o.appendChild(l),t.appendChild(s),t.appendChild(o),i.appendChild(t),t.addEventListener("click",()=>{this.showSearchModal()})}),i}createNoteItem(i,e=!1){if(!i)return null;let t=e?this.plugin.settings.pinnedNotesStyle:this.plugin.settings.recentNotesStyle,s=this.createElement("div",`note-item${e?" pinned":""}`);s.setAttribute("data-note-path",i.path),t.itemPadding&&(s.style.padding=t.itemPadding),t.itemMargin&&(s.style.margin=t.itemMargin),s.addEventListener("click",async()=>{let C=this.app.workspace.getLeavesOfType("markdown").find(z=>z.view.getState().file===i.path);C?await this.app.workspace.revealLeaf(C):this.app.workspace.openLinkText(i.path,"",!1)}),e&&s.addEventListener("contextmenu",C=>{C.preventDefault(),C.stopPropagation();let z=new X.Menu;z.addItem(Z=>{Z.setTitle(a("remove_from_pinned_notes")).setIcon("pin-off").onClick(async()=>{this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(se=>se!==i.path),await this.plugin.saveSettings(),this.refreshStartPage()})}),z.showAtMouseEvent(C)});let n=this.createElement("div","note-icon"),o=i.extension,r=g.createFileIcon(o);n.appendChild(r);let l=this.createElement("div","note-content"),d=this.createElement("div","note-title",i.basename);t.noteTitleFontSize&&(d.style.fontSize=t.noteTitleFontSize),t.noteTitleMargin&&(d.style.margin=t.noteTitleMargin),t.noteTitlePadding&&(d.style.padding=t.noteTitlePadding);let p=this.createElement("div","note-meta",""),h=m.formatDate(i.stat.mtime),v=i.parent?i.parent.path:"/";v.startsWith("/")||(v="/"+v);let b=this.createElement("div","note-date",h);t.noteDateFontSize&&(b.style.fontSize=t.noteDateFontSize),p.appendChild(b);let E=g.createFolderIcon();p.appendChild(E);let S=this.createElement("div","note-folder",m.truncateMiddle(v));t.noteFolderFontSize&&(S.style.fontSize=t.noteFolderFontSize),p.appendChild(S),d.setAttribute("title",i.basename),l.appendChild(d),l.appendChild(p);let w=this.createElement("div","note-actions"),L=this.createElement("button","btn-icon"),te=g.createEditIcon();return L.appendChild(te),w.appendChild(L),s.appendChild(n),s.appendChild(l),s.appendChild(w),s}createNotesSection(i,e,t=!1,s){let n=t?this.plugin.settings.pinnedNotesStyle:this.plugin.settings.recentNotesStyle,o=this.createElement("section","section");n.sectionMargin&&(o.style.margin=n.sectionMargin),n.sectionPadding&&(o.style.padding=n.sectionPadding);let r=this.createElement("div","section-header");n.headerMargin&&(r.style.margin=n.headerMargin),n.headerPadding&&(r.style.padding=n.headerPadding);let l=this.createElement("h2","section-title");if(l.appendChild(s),l.appendChild(document.createTextNode(i)),n.titleFontSize&&(l.style.fontSize=n.titleFontSize),n.titleMargin&&(l.style.margin=n.titleMargin),n.titlePadding&&(l.style.padding=n.titlePadding),t){let p=this.createElement("button","btn btn-text",a("manage"));p.addEventListener("click",()=>{let h=this.app.setting;h.open(),setTimeout(()=>{h.openTabById(this.plugin.manifest.id)},100)}),r.appendChild(l),r.appendChild(p)}else{let p=this.createRecentNotesLimitDropdown();r.appendChild(l),r.appendChild(p)}let d=this.createElement("div","notes-list");return n.listGap&&(d.style.gap=n.listGap),e&&e.forEach(p=>{let h=this.createNoteItem(p,t);h&&d.appendChild(h)}),o.appendChild(r),o.appendChild(d),o}createContentGrid(){let i=this.createElement("div","content-grid"),e=this.createNotesSection(a("pinned_notes"),this.pinnedNotes,!0,g.createPinnedNoteIcon());e.classList.add("pinned-notes");let t=this.createNotesSection(a("recent_notes"),this.recentNotes,!1,g.createRecentNoteIcon());return t.classList.add("recent-notes"),i.appendChild(e),i.appendChild(t),i}createMainContent(){let i=this.createElement("main","main-content");if(this.plugin.settings.showStatBar){let t=this.createStatsSection();i.appendChild(t)}let e=this.createContentGrid();return i.appendChild(e),i}async createFooter(){let i=this.createElement("footer","footer"),e=this.createElement("p","",a("default_footer_text"));return i.appendChild(e),this.updateFooterTextAsync(e),i}async updateFooterTextAsync(i){try{let e=await T.getFooterText(this.plugin);if(i.textContent=e,this.plugin.settings.showCustomFooterText&&this.plugin.settings.useRandomFooterText&&!i.querySelector("#refresh-footer-text")){let t=g.createRefreshIcon();t.setAttribute("id","refresh-footer-text"),t.addEventListener("click",()=>{this.plugin.settings.todayRandomEnFooterText="",this.plugin.settings.todayRandomZhFooterText="",this.plugin.saveSettings(),i.textContent=a("loading_footer_text"),this.updateFooterTextAsync(i)}),i.appendChild(t)}}catch(e){console.error("Failed to load footer text:",e)}}createElement(i,e="",t=""){let s=document.createElement(i);return e&&(s.className=e),t&&(s.textContent=t),s}refreshStartPage(){this.app.workspace.getLeavesOfType(_).forEach(e=>{if(e.view instanceof f){e.view.renderContent();return}})}createRecentNotesLimitDropdown(){let i=document.createElement("select");for(let s=5;s<=50;s+=5){let n=document.createElement("option");n.value=s.toString(),n.textContent=s.toString(),i.appendChild(n),s===this.plugin.settings.recentNotesLimit&&(n.selected=!0)}i.addEventListener("change",()=>{let s=parseInt(i.value,10);this.plugin.settings.recentNotesLimit=s,this.plugin.saveSettings(),this.refreshStartPage()});let e=document.createElement("label");e.className="recent-notes-limit-label",e.textContent=a("show_count"),e.htmlFor=i.id;let t=document.createElement("div");return t.appendChild(e),t.appendChild(i),t}getTodayModifiedNoteCount(){let i=new Date;return i.setHours(0,0,0,0),this.app.vault.getMarkdownFiles().filter(s=>s.stat.mtime>=i.getTime()).length}getTotalSize(){let i=this.plugin.settings.includeAllFilesInRecent?this.app.vault.getFiles():this.app.vault.getMarkdownFiles(),e=0;return i.forEach(t=>{e+=t.stat.size}),e}setupGlobalKeyListener(){this.globalKeyHandler=i=>{this.app.workspace.getActiveViewOfType(f)&&(i.ctrlKey||i.altKey||i.metaKey||i.shiftKey||i.key.length===1&&(i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||document.querySelector(".modal-container")||(this.initialQuery=i.key,this.showSearchModal(),i.preventDefault(),i.stopPropagation())))},document.addEventListener("keydown",this.globalKeyHandler,!0)}showSearchModal(){if(document.querySelector(".modal-container"))return;new R(this.app,this.plugin,e=>{this.app.workspace.openLinkText(e.path,"",!1)},this.initialQuery).open(),this.initialQuery=""}removeGlobalKeyListener(){this.globalKeyHandler&&document.removeEventListener("keydown",this.globalKeyHandler,!0)}hasUpdate(){let i=this.plugin.manifest.version,e=this.plugin.settings.latestVersion;if(!e)return!1;let t=i.split(".").map(Number),s=e.split(".").map(Number);for(let n=0;n<Math.max(t.length,s.length);n++){let o=t[n]||0,r=s[n]||0;if(r>o)return!0;if(r<o)return!1}return!1}createUpdateBadge(){let i=this.createElement("div","update-badge");i.setAttribute("title",a("new_version_available"));let e=this.createElement("span","update-badge-icon","\u{1F389}"),t=this.createElement("span","update-badge-text",a("update_to_version").replace("{version}",this.plugin.settings.latestVersion));return i.appendChild(e),i.appendChild(t),i.addEventListener("click",()=>{let s=this.app.setting;s.open(),setTimeout(()=>{s.openTabById("community-plugins")},100)}),i}};var _="start-page-view",f=class extends y.ItemView{constructor(e,t,s){super(e);this.refreshTimer=null;this.REFRESH_INTERVAL=6e4;this.isScrollEventRegistered=!1;this.app=t,this.plugin=s,this.navigation=!0,this.icon="home",this.contentEl.addClass("start-page-view"),this.debouncedSaveScrollPosition=(0,y.debounce)(()=>{this.saveScrollPosition()},300),this.plugin.settings.showTitleNavigationBar==="show"?this.showTitleNavigationBar(!0):this.plugin.settings.showTitleNavigationBar==="hide"?this.showTitleNavigationBar(!1):y.Platform.isDesktop?this.showTitleNavigationBar(!1):this.showTitleNavigationBar(!0)}getViewType(){return _}getDisplayText(){return a("start_page")}getIcon(){return"home"}canClose(){return!0}async onOpen(){await this.renderContent(),this.restoreScrollPosition(),this.fileChangeEventRef=this.app.vault.on("modify",()=>{this.renderContent()}),this.fileCreateEventRef=this.app.vault.on("create",()=>{this.renderContent()}),this.fileDeleteEventRef=this.app.vault.on("delete",()=>{this.renderContent()}),this.fileRenameEventRef=this.app.vault.on("rename",()=>{this.renderContent()}),this.registerDomEvent(this.containerEl,"contextmenu",e=>{let t=new y.Menu;t.addItem(s=>{s.setTitle(a("refresh")).setIcon("refresh-cw").onClick(()=>this.renderContent())}),t.showAtPosition({x:e.clientX,y:e.clientY})})}async onClose(){this.startPageCreator&&this.startPageCreator.destroy(),this.fileChangeEventRef&&this.app.vault.offref(this.fileChangeEventRef),this.fileCreateEventRef&&this.app.vault.offref(this.fileCreateEventRef),this.fileDeleteEventRef&&this.app.vault.offref(this.fileDeleteEventRef),this.fileRenameEventRef&&this.app.vault.offref(this.fileRenameEventRef),this.clearRefreshTimer()}clearRefreshTimer(){this.refreshTimer!==null&&(window.clearInterval(this.refreshTimer),this.refreshTimer=null)}startRefreshTimerIfNeeded(e,t){this.clearRefreshTimer(),e.concat(t).some(n=>Date.now()-n.stat.mtime<24*60*60*1e3)&&(this.refreshTimer=window.setInterval(()=>{this.updateModifiedTimes()},this.REFRESH_INTERVAL))}async updateModifiedTimes(){if(!this.startPageCreator)return;let e=this.getTFiles(this.plugin.settings.pinnedNotes),t=this.getRecentNotes(this.plugin.settings.recentNotesLimit),s=e.concat(t).filter(n=>Date.now()-n.stat.mtime<24*60*60*1e3);s.length>0&&await this.startPageCreator.updateNoteModifiedTimes(s)}async renderContent(){let e=this.containerEl.children[1];this.isScrollEventRegistered||(this.registerDomEvent(e,"scroll",()=>{this.debouncedSaveScrollPosition()}),this.isScrollEventRegistered=!0),this.startPageCreator||(this.startPageCreator=new V(this.app,this.plugin,e));let t=this.getTFiles(this.plugin.settings.pinnedNotes),s=this.getRecentNotes(this.plugin.settings.recentNotesLimit);await this.startPageCreator.createStartPage(t,s),this.startRefreshTimerIfNeeded(t,s)}saveScrollPosition(){let e=document.querySelector(".start-page-container");e&&(this.plugin.settings.scrollPosition=e.scrollTop,this.plugin.saveSettings())}restoreScrollPosition(){let e=document.querySelector(".start-page-container");e&&this.plugin.settings.scrollPosition>0&&setTimeout(()=>{e.scrollTop=this.plugin.settings.scrollPosition},0)}getTFiles(e){return e?e.map(s=>{let n=this.app.vault.getAbstractFileByPath(s);return n instanceof y.TFile?n:null}).filter(s=>s!==null):[]}getRecentNotes(e){let t=this.app.workspace.getLastOpenFiles(),s=this.plugin.settings.includeAllFilesInRecent?this.app.vault.getFiles():this.app.vault.getMarkdownFiles();return s.length===0?[]:s.map(o=>{let r=0,l=t.indexOf(o.path);l!==-1&&(r=Date.now()-l*60*1e3);let d=Math.max(o.stat.mtime,r);return{file:o,lastTime:d}}).sort((o,r)=>r.lastTime-o.lastTime).slice(0,e).map(o=>o.file)}showTitleNavigationBar(e){let t=this.containerEl.querySelector('.workspace-leaf-content[data-type="start-page-view"] .view-header');t&&(t.style.display=e?"":"none")}};var c=require("obsidian");var J=require("obsidian"),D=class extends J.SuggestModal{constructor(e,t){super(e);this.onChooseItem=t}getSuggestions(e){return this.app.vault.getFiles().filter(t=>t.path.toLowerCase().includes(e.toLowerCase()))}renderSuggestion(e,t){t.setText(e.path)}onChooseSuggestion(e,t){this.onChooseItem(e)}};var H=require("obsidian"),B=class extends H.SuggestModal{constructor(e,t){super(e);this.onChooseItem=t}getSuggestions(e){let t=[],s=this.app.vault.getAllLoadedFiles().filter(o=>o instanceof H.TFolder);t.push(...s);let n=this.app.vault.getFiles();return t.push(...n),t.filter(o=>o.path.toLowerCase().includes(e.toLowerCase()))}renderSuggestion(e,t){let s=t.createDiv({cls:"file-folder-suggest-item"});e instanceof H.TFolder?s.createSpan({cls:"suggest-type",text:"[Folder] "}):s.createSpan({cls:"suggest-type",text:"[File] "}),s.createSpan({text:e.path})}onChooseSuggestion(e,t){this.onChooseItem(e)}};var G=class extends c.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}refreshStartPage(){this.app.workspace.getLeavesOfType(_).forEach(t=>{t.view instanceof f&&t.view.renderContent()})}async moveNote(e,t){let s=[...this.plugin.settings.pinnedNotes],[n]=s.splice(e,1);s.splice(t,0,n),this.plugin.settings.pinnedNotes=s,await this.plugin.saveSettings(),this.refreshStartPage(),this.display()}updateTitleNavigationBar(){this.app.workspace.getLeavesOfType(_).forEach(t=>{if(t.view instanceof f){let s=t.view;this.plugin.settings.showTitleNavigationBar==="show"?s.showTitleNavigationBar(!0):this.plugin.settings.showTitleNavigationBar==="hide"?s.showTitleNavigationBar(!1):s.showTitleNavigationBar(!c.Platform.isDesktop)}})}updateFootComponentDisabledState(){this.customFooterTextComponent&&this.customFooterTextComponent.setDisabled(!this.plugin.settings.showCustomFooterText||this.plugin.settings.useRandomFooterText),this.useRandomFooterTextComponent&&this.useRandomFooterTextComponent.setDisabled(!this.plugin.settings.showCustomFooterText)}async importFromBookmarks(){var e,t;try{let s=(e=this.app.internalPlugins)==null?void 0:e.getPluginById("bookmarks");if(!s||!s.enabled){new c.Notice(a("import_bookmarks_no_bookmarks"));return}let n=((t=s.instance)==null?void 0:t.items)||[],o=[],r=p=>{for(let h of p)h.type==="file"&&h.path?o.push(h.path):h.type==="group"&&h.items&&r(h.items)};if(r(n),o.length===0){new c.Notice(a("import_bookmarks_no_bookmarks"));return}let l=o.filter(p=>!this.plugin.settings.pinnedNotes.includes(p));if(l.length===0){new c.Notice(a("import_bookmarks_already_exist"));return}this.plugin.settings.pinnedNotes.push(...l),await this.plugin.saveSettings(),this.refreshStartPage(),this.display();let d=a("import_bookmarks_success").replace("{count}",l.length.toString());new c.Notice(d)}catch(s){console.error("Error importing bookmarks:",s),new c.Notice(a("import_bookmarks_no_bookmarks"))}}display(){let{containerEl:e}=this;e.empty(),this.createGeneralSettings(e),this.createAppearanceSettings(e),this.createStyleSettings(e),this.createNewTabSettings(e),this.createSearchSettings(e),this.createFooterSettings(e),this.createPinnedNotesSettings(e),setTimeout(()=>{this.updateFootComponentDisabledState()},0)}createGeneralSettings(e){new c.Setting(e).setName(a("general_settings_heading")).setHeading(),new c.Setting(e).setName(a("include_all_files_in_recent")).setDesc(a("include_all_files_in_recent_desc")).addToggle(t=>{t.setValue(this.plugin.settings.includeAllFilesInRecent),t.onChange(async s=>{this.plugin.settings.includeAllFilesInRecent=s,await this.plugin.saveSettings(),this.refreshStartPage()})}),new c.Setting(e).setName(a("recent_notes_limit")).setDesc(a("recent_notes_limit_desc")).addDropdown(t=>{for(let s=5;s<=50;s+=5)t.addOption(s.toString(),s.toString());t.setValue(this.plugin.settings.recentNotesLimit.toString()),t.onChange(async s=>{this.plugin.settings.recentNotesLimit=parseInt(s),await this.plugin.saveSettings(),this.refreshStartPage()})})}createAppearanceSettings(e){new c.Setting(e).setName(a("appearance_settings_heading")).setHeading(),new c.Setting(e).setName(a("show_title_navigation_bar")).setDesc(a("show_title_navigation_bar_desc")).addDropdown(t=>{t.addOption("default",a("show_title_navigation_bar_default")),t.addOption("show",a("show_title_navigation_bar_show")),t.addOption("hide",a("show_title_navigation_bar_hide")),t.setValue(this.plugin.settings.showTitleNavigationBar),t.onChange(async s=>{this.plugin.settings.showTitleNavigationBar=s,await this.plugin.saveSettings(),this.updateTitleNavigationBar()})}),new c.Setting(e).setName(a("show_stat_bar")).setDesc(a("show_stat_bar_desc")).addToggle(t=>{t.setValue(this.plugin.settings.showStatBar),t.onChange(async s=>{this.plugin.settings.showStatBar=s,await this.plugin.saveSettings(),this.refreshStartPage()})})}createStyleSettings(e){new c.Setting(e).setName(a("style_settings_heading")).setHeading(),this.createSectionStyleSettings(e,a("style_settings_pinned_notes"),this.plugin.settings.pinnedNotesStyle),this.createSectionStyleSettings(e,a("style_settings_recent_notes"),this.plugin.settings.recentNotesStyle)}createSectionStyleSettings(e,t,s){let n=e.createEl("details"),o=n.createEl("summary");o.textContent=t,o.style.fontWeight="bold",o.style.cursor="pointer",o.style.marginBottom="10px",this.addStyleSetting(n,s,"sectionMargin",a("style_section_margin"),a("style_section_margin_desc")),this.addStyleSetting(n,s,"sectionPadding",a("style_section_padding"),a("style_section_padding_desc")),this.addStyleSetting(n,s,"headerMargin",a("style_header_margin"),a("style_header_margin_desc")),this.addStyleSetting(n,s,"headerPadding",a("style_header_padding"),a("style_header_padding_desc")),this.addStyleSetting(n,s,"titleFontSize",a("style_title_font_size"),a("style_title_font_size_desc")),this.addStyleSetting(n,s,"titleMargin",a("style_title_margin"),a("style_title_margin_desc")),this.addStyleSetting(n,s,"titlePadding",a("style_title_padding"),a("style_title_padding_desc")),this.addStyleSetting(n,s,"listGap",a("style_list_gap"),a("style_list_gap_desc")),this.addStyleSetting(n,s,"itemPadding",a("style_item_padding"),a("style_item_padding_desc")),this.addStyleSetting(n,s,"itemMargin",a("style_item_margin"),a("style_item_margin_desc")),this.addStyleSetting(n,s,"noteTitleFontSize",a("style_note_title_font_size"),a("style_note_title_font_size_desc")),this.addStyleSetting(n,s,"noteTitleMargin",a("style_note_title_margin"),a("style_note_title_margin_desc")),this.addStyleSetting(n,s,"noteTitlePadding",a("style_note_title_padding"),a("style_note_title_padding_desc")),this.addStyleSetting(n,s,"noteDateFontSize",a("style_note_date_font_size"),a("style_note_date_font_size_desc")),this.addStyleSetting(n,s,"noteFolderFontSize",a("style_note_folder_font_size"),a("style_note_folder_font_size_desc"))}addStyleSetting(e,t,s,n,o){new c.Setting(e).setName(n).setDesc(o).addText(r=>r.setValue(t[s]).onChange(async l=>{t[s]=l,await this.plugin.saveSettings(),this.refreshStartPage()}))}createNewTabSettings(e){new c.Setting(e).setName(a("new_tab_settings_heading")).setHeading(),new c.Setting(e).setName(a("replace_new_tab")).setDesc(a("replace_new_tab_desc")).addToggle(t=>{t.setValue(this.plugin.settings.replaceNewTab),t.onChange(async s=>{this.plugin.settings.replaceNewTab=s,await this.plugin.saveSettings()})})}createSearchSettings(e){new c.Setting(e).setName(a("search_settings_heading")).setHeading(),new c.Setting(e).setName(a("search_exclude_list")).setDesc(a("search_exclude_list_desc")).addButton(t=>{t.setButtonText(a("search_exclude_list_add_button")).onClick(()=>{new B(this.app,async s=>{this.plugin.settings.excludeList.includes(s.path)||(this.plugin.settings.excludeList.push(s.path),await this.plugin.saveSettings(),this.display())}).open()})}),this.displayCurrentExcludeList(e)}displayCurrentExcludeList(e){if(this.plugin.settings.excludeList.length===0)return;new c.Setting(e).setName(a("current_search_exclude_list")).setHeading();let t=e.createEl("ul",{cls:"pinned-note-list"});this.plugin.settings.excludeList.forEach((s,n)=>{this.createExcludeListItem(t,s,n)})}createExcludeListItem(e,t,s){let n=e.createEl("li",{cls:"exclude-list-item"}),r=this.app.vault.getAbstractFileByPath(t)instanceof c.TFolder,l=n.createSpan({cls:"exclude-item-icon"}),d=r?g.createFolderIcon():g.createFileIcon("md");l.appendChild(d),n.createEl("div",{cls:"exclude-item-path"}).createEl("span",{cls:"exclude-item-path-text",text:t}).setAttr("title",t);let v=n.createEl("div",{cls:"exclude-item-actions"});this.createExcludeListRemoveButton(v,t)}createExcludeListRemoveButton(e,t){let s=e.createEl("button",{cls:"mod-warning remove-button control-button icon-button"});s.setAttr("aria-label",a("search_exclude_list_remove")),s.setAttr("title",a("search_exclude_list_remove"));let n=g.createRemoveIcon();s.appendChild(n),s.onclick=async()=>{this.plugin.settings.excludeList=this.plugin.settings.excludeList.filter(o=>o!==t),await this.plugin.saveSettings(),this.display()}}createFooterSettings(e){new c.Setting(e).setName(a("footer_settings_heading")).setHeading(),new c.Setting(e).setName(a("show_custom_footer_text")).setDesc(a("show_custom_footer_text_desc")).addToggle(t=>{t.setValue(this.plugin.settings.showCustomFooterText),t.onChange(async s=>{this.plugin.settings.showCustomFooterText=s,s||(this.plugin.settings.useRandomFooterText=!1,this.useRandomFooterTextComponent.setValue(!1)),await this.plugin.saveSettings(),this.updateFootComponentDisabledState(),this.refreshStartPage()})}),new c.Setting(e).setName(a("use_random_footer_text")).setDesc(a("use_random_footer_text_desc")).addToggle(t=>{this.useRandomFooterTextComponent=t,t.setValue(this.plugin.settings.useRandomFooterText),t.onChange(async s=>{this.plugin.settings.useRandomFooterText=s,await this.plugin.saveSettings(),this.updateFootComponentDisabledState(),this.refreshStartPage()})}),new c.Setting(e).setName(a("custom_footer_text")).setDesc(a("custom_footer_text_desc")).addText(t=>{this.customFooterTextComponent=t,t.setValue(this.plugin.settings.customFooterText),t.onChange(async s=>{this.plugin.settings.customFooterText=s,await this.plugin.saveSettings(),this.updateFootComponentDisabledState(),this.refreshStartPage()})})}createPinnedNotesSettings(e){this.createPinnedNotesHeading(e),this.createNoteSelectionButton(e),this.displayCurrentPinnedNotes(e)}createPinnedNotesHeading(e){new c.Setting(e).setName(a("pinned_notes_settings_heading")).setHeading()}createNoteSelectionButton(e){new c.Setting(e).setName(a("pinned_notes_select")).setDesc(a("pinned_notes_select_desc")).addButton(t=>{t.setButtonText(a("pinned_notes_select_button")).onClick(()=>{new D(this.app,async s=>{this.plugin.settings.pinnedNotes.includes(s.path)||(this.plugin.settings.pinnedNotes.push(s.path),await this.plugin.saveSettings(),this.refreshStartPage(),this.display())}).open()})}),new c.Setting(e).setName(a("pinned_notes_import_from_bookmarks")).setDesc(a("pinned_notes_import_from_bookmarks_desc")).addButton(t=>{t.setButtonText(a("pinned_notes_import_from_bookmarks_button")).onClick(async()=>{await this.importFromBookmarks()})})}displayCurrentPinnedNotes(e){if(this.plugin.settings.pinnedNotes.length===0)return;new c.Setting(e).setName(a("current_pinned_notes")).setHeading();let t=e.createEl("ul",{cls:"pinned-note-list"});this.plugin.settings.pinnedNotes.forEach((s,n)=>{this.createPinnedNoteListItem(t,s,n)})}createPinnedNoteListItem(e,t,s){var w;let n=e.createEl("li",{cls:"pinned-note-item"});if(!this.app.vault.getAbstractFileByPath(t))return;let r=(w=t.split("/").pop())!=null?w:t;n.createEl("div",{cls:"note-line1"}).createEl("span",{cls:"note-title",text:r});let d=n.createEl("div",{cls:"note-line2"}),p=d.createEl("div",{cls:"note-path"}),h=p.createSpan({cls:"folder-icon"}),v=g.createFolderIcon();h.appendChild(v);let b=m.getDirPath(t);p.createEl("span",{cls:"note-path-text",text:m.truncateMiddle(b)}).setAttr("title",b);let S=d.createEl("div",{cls:"note-actions"});this.createNoteControlButtons(S,t,s)}createNoteControlButtons(e,t,s){this.createMoveUpButton(e,s),this.createMoveDownButton(e,s),this.createRemoveButton(e,t)}createMoveUpButton(e,t){if(t>0){let s=e.createEl("button",{cls:"control-button icon-button"});s.setAttr("aria-label",a("move_up")),s.setAttr("title",a("move_up"));let n=g.createArrowUpIcon();s.appendChild(n),s.onclick=async()=>{await this.moveNote(t,t-1)}}}createMoveDownButton(e,t){if(t<this.plugin.settings.pinnedNotes.length-1){let s=e.createEl("button",{cls:"control-button icon-button"});s.setAttr("aria-label",a("move_down")),s.setAttr("title",a("move_down"));let n=g.createArrowDownIcon();s.appendChild(n),s.onclick=async()=>{await this.moveNote(t,t+1)}}}createRemoveButton(e,t){let s=e.createEl("button",{cls:"mod-warning remove-button control-button icon-button"});s.setAttr("aria-label",a("pinned_notes_remove")),s.setAttr("title",a("pinned_notes_remove"));let n=g.createRemoveIcon();s.appendChild(n),s.onclick=async()=>{this.plugin.settings.pinnedNotes=this.plugin.settings.pinnedNotes.filter(o=>o!==t),await this.plugin.saveSettings(),this.refreshStartPage(),this.display()}}};var ee=require("obsidian"),F=class{static async checkForUpdate(i){var e,t;try{let s=await(0,ee.requestUrl)({url:this.GITHUB_API_URL,method:"GET",headers:{Accept:"application/vnd.github.v3+json"}});if(s.status!==200)return console.warn("Failed to check for updates:",s.status),null;let n=s.json,o=((e=n.tag_name)==null?void 0:e.replace(/^v/,""))||((t=n.name)==null?void 0:t.replace(/^v/,""));return o?{hasUpdate:this.compareVersions(o,i)>0,latestVersion:o,currentVersion:i,releaseUrl:this.GITHUB_RELEASE_URL}:(console.warn("Could not determine latest version"),null)}catch(s){return console.error("Error checking for updates:",s),null}}static compareVersions(i,e){let t=i.split(".").map(Number),s=e.split(".").map(Number);for(let n=0;n<Math.max(t.length,s.length);n++){let o=t[n]||0,r=s[n]||0;if(o>r)return 1;if(o<r)return-1}return 0}};F.GITHUB_API_URL="https://api.github.com/repos/kuzzh/obsidian-startpage/releases/latest",F.GITHUB_RELEASE_URL="https://github.com/kuzzh/obsidian-startpage/releases";var O=class extends k.Plugin{async onload(){await this.loadSettings(),this.settings.scrollPosition=0,this.saveSettings();let e=(0,k.getLanguage)()||"en";q(e),this.registerView(_,t=>new f(t,this.app,this)),this.checkForUpdates(),this.addRibbonIcon("home","Open start page",()=>{this.activateStartPage()}),this.addSettingTab(new G(this.app,this)),this.addCommand({id:"open-start-page",name:a("open_start_page"),callback:()=>{this.activateStartPage()}}),this.addCommand({id:"open-start-page-new-tab",name:a("open_start_page_new_tab"),callback:()=>{this.activateStartPageNewTab()}}),this.registerEvent(this.app.workspace.on("active-leaf-change",t=>{var s;if(this.settings.replaceNewTab&&t&&!t.view.getViewType().startsWith(_)){let n=t.getViewState();n.type==="empty"&&!((s=n.state)!=null&&s.file)&&this.replaceWithStartPage(t)}})),this.registerEvent(this.app.workspace.on("file-menu",(t,s)=>{s instanceof k.TFile&&this.addPinnedNoteMenuItem(t,s)}))}async loadSettings(){await this.backupSettings();let e=await this.loadData();e&&typeof e=="object"?this.settings={...x,...e,pinnedNotes:Array.isArray(e.pinnedNotes)?e.pinnedNotes:[],recentNotesLimit:typeof e.recentNotesLimit=="number"?e.recentNotesLimit:10,includeAllFilesInRecent:typeof e.includeAllFilesInRecent=="boolean"?e.includeAllFilesInRecent:!0,replaceNewTab:typeof e.replaceNewTab=="boolean"?e.replaceNewTab:!0,showTitleNavigationBar:["default","show","hide"].includes(e.showTitleNavigationBar)?e.showTitleNavigationBar:"default",showCustomFooterText:typeof e.showCustomFooterText=="boolean"?e.showCustomFooterText:!1,useRandomFooterText:typeof e.useRandomFooterText=="boolean"?e.useRandomFooterText:!1,todayRandomEnFooterText:typeof e.todayRandomEnFooterText=="string"?e.todayRandomEnFooterText:"",todayRandomZhFooterText:typeof e.todayRandomZhFooterText=="string"?e.todayRandomZhFooterText:"",customFooterText:typeof e.customFooterText=="string"?e.customFooterText:"",scrollPosition:typeof e.scrollPosition=="number"?e.scrollPosition:0,showStatBar:typeof e.showStatBar=="boolean"?e.showStatBar:!0,lastVersionCheck:typeof e.lastVersionCheck=="number"?e.lastVersionCheck:0,latestVersion:typeof e.latestVersion=="string"?e.latestVersion:"",excludeList:Array.isArray(e.excludeList)?e.excludeList:[],pinnedNotesStyle:typeof e.pinnedNotesStyle=="object"?{...x.pinnedNotesStyle,...e.pinnedNotesStyle}:{...x.pinnedNotesStyle},recentNotesStyle:typeof e.recentNotesStyle=="object"?{...x.recentNotesStyle,...e.recentNotesStyle}:{...x.recentNotesStyle}}:this.settings={...x}}async backupSettings(){let e=this.manifest.dir+"/backup",t=`${e}/data-${new Date().toISOString().slice(0,10)}.json`;if(!await this.app.vault.adapter.exists(t)){await this.app.vault.adapter.mkdir(e);let n=this.manifest.dir+"/data.json";if(await this.app.vault.adapter.exists(n)){let o=await this.app.vault.adapter.read(n);await this.app.vault.adapter.write(t,o)}else console.log("data.json file does not exist, skipping backup")}}async saveSettings(){await this.saveData(this.settings)}findStartPageLeaf(){let e=this.app.workspace.getLeavesOfType(_);return e.length>0?e[0]:null}async activateStartPage(){try{let e=this.app.workspace.getLeaf(!1);e&&await e.setViewState({type:_,active:!0})}catch(e){console.error("Failed to create Start Page leaf:",e)}}async activateStartPageNewTab(){try{let e=this.app.workspace.getLeaf(!0);e&&await e.setViewState({type:_,active:!0})}catch(e){console.error("Failed to create Start Page leaf in new tab:",e)}}async replaceWithStartPage(e){try{await e.setViewState({type:_,active:!0})}catch(t){console.error("Failed to replace with Start Page:",t)}}addPinnedNoteMenuItem(e,t){let s=this.settings.pinnedNotes.includes(t.path);e.addItem(n=>{n.setTitle(s?a("remove_from_pinned_notes"):a("add_to_pinned_notes")).setIcon(s?"pin-off":"pin").onClick(async()=>{s?this.settings.pinnedNotes=this.settings.pinnedNotes.filter(r=>r!==t.path):this.settings.pinnedNotes.push(t.path),await this.saveSettings(),this.app.workspace.getLeavesOfType(_).forEach(r=>{r.view instanceof f&&r.view.renderContent()})})})}onunload(){this.app.workspace.getLeavesOfType(_).forEach(e=>e.detach())}async checkForUpdates(){let e=Date.now(),t=24*60*60*1e3;if(!(e-this.settings.lastVersionCheck<t))try{let s=await F.checkForUpdate(this.manifest.version);s&&s.hasUpdate?(this.settings.latestVersion=s.latestVersion,this.settings.lastVersionCheck=e,await this.saveSettings(),this.app.workspace.getLeavesOfType(_).forEach(o=>{o.view instanceof f&&o.view.renderContent()})):(this.settings.lastVersionCheck=e,await this.saveSettings())}catch(s){console.error("Error checking for updates:",s)}}};

/* nosourcemap */